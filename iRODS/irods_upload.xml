<tool id="irods_upload" name="iRODS Upload" version="0.1" workflow_compatible="false">
	<description>Upload your files to iRODS from Galaxy</description>
	<requirements>
		<requirement type="package" version="0.8.2">python-irodsclient</requirement>
		<requirement type="package" version="0.1.0">tk</requirement>
	</requirements>

	<command interpreter="python">
		## using CHEETAH
		#import json
		#set params = {}
		#set params["irods_host"] = str($custom_host)
		#set params["irods_port"] = str($custom_port)
		#set params["irods_zone"] = str($custom_zone)
		##if $irods_config.typeiRODS == "use_any_irods"
		##set params["irods_host"] = str($irods_config.custom_host)
		##set params["irods_port"] = str($irods_config.custom_port)
		##set params["irods_zone"] = str($irods_config.custom_zone)
		##end if
		##if $irods_config.typeiRODS == "use_tug_irods"
		##set params["irods_host"] = "data.cyverse.tugraz.at"
		##set params["irods_port"] = "1247"
		##set params["irods_zone"] = "TUG"
		##end if
		## set up Galaxy params
		#set params["galaxy_user"] = str($__user_name__)
		#set params["job_id"] = str($output.creating_job.id)
		#set params["out_dir"] = str($output.files_path)
		#set params["out_file"] = str($output)
		#set params["up_file"] = str($up_file.name)
		#set params["up_file_path"] = str($up_file)
		#set params["galaxy_root"] = str($GALAXY_ROOT_DIR)
		#set params["galaxy_datatypes"] = str($GALAXY_DATATYPES_CONF_FILE)
		#set params["tool_type"] = "up"
		#set $params=json.dumps($params)
		main.py '$params'
	</command>

	<inputs>
		<param name="custom_host" type="text" value="data.cyverse.tugraz.at" label="iRODS Host:" />
		<param name="custom_port" type="text" value="1247" label="iRODS Port:" />
		<param name="custom_zone" type="text" value="TUG" label="iRODS Zone:" />
		<param name="up_file" type="data" value="" label="Galaxy file to upload" />
	</inputs>

	<outputs>
		<data name="output" auto_format="true" />
	</outputs>

	<help>
Upload RODS

	</help>
	 <citations>
        	<citation type="bibtex">
@misc{Upload-iRODS,
  author = {Hohensinner, Richard},
  year = {2021},
  title = {iRODSTools},
  publisher = {GitLab},
  journal = {GitLab repository},
  url = {https://gitlab.tugraz.at/D463A320ED7901AB/galaxy_irods_tools},
}
		</citation>
    	</citations>
</tool>
